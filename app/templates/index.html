{% extends "base.html" %}

{% block content %}
<div class="starter-template">
  <h1>{{ _('Health Sites in Colombia') }}</h1>
  <p class="lead" style="font-size: 15px;">{{ _('Drag the slider to reveal the schools that lie within a given interval from a health site.') }}</p>
  <div id="map" style="height: 500px"></div>
  <script>
      <!-- var school_file="{{url_for('static', filename='data/schools.json')}}"; -->
      initmap();
  </script>
  <br>
  <div id="slider"></div>
  <div id="amount"></div>
  <script>
    $(function() {
      startPos = 0.5;
      $("#slider").slider({
        range: true,
        value: startPos,
        min: 0,
        max: 20,
        step: 0.01,
        slide: function(e, ui) {
          $("#amount").text(ui.values[0] + "-" + ui.values[1] + "km");
        }
      });

      $("#slider").on("slidestop", function(event, ui) {
        startPos = ui.values[0];
        endPos = ui.values[1];

        if (startPos != endPos) {
          socket.emit('update', {data: [startPos, endPos]});
        }

        startPos = endPos;
      });
    });
  </script>

</div>
{% endblock %}
